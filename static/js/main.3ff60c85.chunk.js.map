{"version":3,"sources":["LeftPanel.js","RightPanel.js","TopNav.js","index.js"],"names":["LeftPanel","props","className","TopLeftPanel","BottomLeftPanel","sample","data","inspected_index","console","log","listKeyValuePairs","Object","keys","map","key","data_arr","index","onLabelChange","onInspectedIndexChange","Sample","handleLabelChange","bind","handleInspectedId","e","target","id","value","this","first_column","values","label","divClassName","selectOptions","selectElement","onChange","option","includes","onClick","React","Component","RightPanel","state","code_block","line_numbers","prevProps","element","document","getElementById","scrollIntoView","get_url","replace","positiveLineHighlight","line_number","self","axios","get","then","response","code_array","split","code_above","slice","code_line","code_below","line","join","setState","catch","error","TopNav","handleFileChange","handleDownload","event","uploadedFile","files","propsOnDataChange","onDataChange","reader","FileReader","onload","dataAsString","result","parsedData","d3","readAsText","outFilename","useCsvDownloader","downloadCsv","first_column_name","type","initial_sample_data","bug_pattern","start_line","App","handleValueChange","handleInspectedIndexChange","handleDataChange","column","ReactDOM","render"],"mappings":"yQAEO,SAASA,EAAUC,GACtB,OACI,sBAAKC,UAAU,aAAf,UACI,cAACC,EAAD,eAAkBF,IAClB,cAACG,EAAD,eAAqBH,OAK1B,SAASG,EAAgBH,GAC5B,IAEMI,EAFOJ,EAAMK,MACgC,IAA3BL,EAAMM,gBAAyB,EAAIN,EAAMM,iBAEjEC,QAAQC,IAAIJ,GAEZ,IACMK,EADOC,OAAOC,KAAKP,GACMQ,KAAI,SAAAC,GAAG,OAClC,+BACI,sBAAMZ,UAAU,WAAhB,SAA4BY,IADhC,KAC8C,IAC1C,sBAAMZ,UAAU,aAAhB,SAA8BG,EAAOS,WAI7C,OACI,qBAAKZ,UAAU,oBAAf,SACI,oBAAIA,UAAU,kBAAd,SACKQ,MAMV,SAASP,EAAaF,GACzB,IAAMK,EAAOL,EAAMK,KACbC,GAA6C,IAA3BN,EAAMM,gBAAyB,EAAIN,EAAMM,gBAE3DQ,EAAWT,EAAKO,KAAI,SAACR,EAAQW,GAAT,OACtB,cAAC,EAAD,CAEIA,MAAOA,EACPT,gBAAiBA,EACjBF,OAAQA,EACRY,cAAehB,EAAMgB,cACrBC,uBAAwBjB,EAAMiB,wBALzBF,MASb,OACI,qBAAKd,UAAU,iBAAf,SACKa,I,IAMPI,E,kDACF,WAAYlB,GAAQ,IAAD,8BACf,cAAMA,IACDmB,kBAAoB,EAAKA,kBAAkBC,KAAvB,gBACzB,EAAKC,kBAAoB,EAAKA,kBAAkBD,KAAvB,gBAHV,E,qDAMnB,SAAkBE,GACdf,QAAQC,IAAIc,EAAEC,OAAOC,GAAI,QAASF,EAAEC,OAAOE,OAC3CC,KAAK1B,MAAMgB,cAAcM,EAAEC,OAAOC,GAAI,QAASF,EAAEC,OAAOE,S,+BAG5D,SAAkBV,GACdW,KAAK1B,MAAMiB,uBAAuBF,K,oBAGtC,WAAU,IAAD,OACCA,EAAQW,KAAK1B,MAAMe,MACnBY,EAAejB,OAAOkB,OAAOF,KAAK1B,MAAMI,QAAQ,GAChDyB,EAAQH,KAAK1B,MAAMI,OAAOyB,MAG1BC,GAFaJ,KAAK1B,MAAMI,OAAO,cAEhB,cACKW,EAAQ,GAAK,EAAK,mBAAqB,KACvCW,KAAK1B,MAAMM,kBAAoBS,EAAQ,oBAAsB,KAEjFgB,EAAgB,CAAC,OAAQ,QAAS,UAAW,IAC7CC,EACF,yBAAQR,GAAIT,EAAOd,UAAU,eAAewB,MAAOI,EAAOI,SAAUP,KAAKP,kBAAzE,UACKY,EAAcnB,KAAI,SAACsB,GAAD,OAAY,wBAAQT,MAAOS,EAAf,SAAwBA,OACrDH,EAAcI,SAASN,IAAoB,KAAVA,EAC7B,KACA,wBAAQJ,MAAOI,EAAf,SAAuBA,OAKrC,OACI,qBAAK5B,UAAW6B,EAAhB,SACI,qBAAI7B,UAAU,YAAd,UACI,qBAAIA,UAAU,eAAd,cAA+Bc,KAC/B,oBAAId,UAAU,sBAAd,SAAqC0B,IACrC,oBAAI1B,UAAU,eAAd,SAA8B+B,IAC9B,oBAAI/B,UAAU,wBAAd,SACI,wBACIA,UAAU,iBACVmC,QAAS,kBAAM,EAAKf,kBAAkBN,IAF1C,gC,GA5CHsB,IAAMC,W,iBCtDdC,EAAb,kDACI,WAAYvC,GAAQ,IAAD,8BACf,cAAMA,IACDwC,MAAQ,CACTC,WAAY,wCACZC,aAAc,IAJH,EADvB,sDASI,SAAmBC,GACfpC,QAAQC,IAAI,wBACZ,IAAMoC,EAAUC,SAASC,eAAe,yBAKxC,GAJe,MAAXF,GACAA,EAAQG,iBAGRrB,KAAK1B,MAAMM,kBAAoBqC,EAAUrC,gBAI7C,IAAoC,IAAhCoB,KAAK1B,MAAMM,gBAAf,CAQA,IAAI0C,EAAUtB,KAAK1B,MAAMK,KAAKqB,KAAK1B,MAAMM,iBAAiB,cAE1D0C,GADAA,EAAUA,EAAQC,QAAQ,qBAAsB,sCAC9BA,QAAQ,QAAS,IAEnC,IAAIC,GAAwB,EACxBC,EAAczB,KAAK1B,MAAMK,KAAKqB,KAAK1B,MAAMM,iBAA3B,WACd6C,EAAc,IACdA,EAAc,EACdD,GAAwB,GAG5B,IAAME,EAAO1B,KACb2B,IAAMC,IAAIN,GAASO,MAAK,SAASC,GAC7BL,GAA4B,EAE5B,IAAMM,EAAaD,EAASnD,KAAKqD,MAAM,MACjCC,EAAaF,EAAWG,MAAM,EAAGT,GACjCU,EAAYJ,EAAWN,GACvBW,EAAaL,EAAWG,MAAMT,EAAc,GAE9CT,EAAee,EAAW7C,KAAI,SAACmD,EAAMhD,GAAP,OAC9B,uBAAMd,UAAU,cAAhB,UAA+Bc,EAAQ,EAAE,6BAC7C2B,EACI,qBAAKzC,UAAU,eAAf,SACI,+BAAOyC,MAIf,IAAMD,EACF,sBAAKxC,UAAU,aAAf,UACI,+BAAO0D,EAAWK,KAAK,QACrBb,EAAc,EAAI,uBAAS,GAC7B,sBACI3B,GAAG,wBACHvB,UAAWiD,EAAwB,iBAAmB,GAF1D,SAIKW,IAEL,uBACA,+BAAOC,EAAWE,KAAK,WAI/BZ,EAAKa,SAAS,CAAExB,aAAYC,oBAC7BwB,OAAM,SAASC,GACd5D,QAAQC,IAAI2D,WApDZzC,KAAKuC,SAAS,CACVxB,WAAY,wCACZC,aAAc,OAvB9B,oBA6EI,WAEI,OADAnC,QAAQC,IAAI,4BAER,sBAAKP,UAAU,cAAf,UACKyB,KAAKc,MAAME,aACXhB,KAAKc,MAAMC,kBAlF5B,GAAgCJ,IAAMC,W,yBCM/B,IAAM8B,EAAb,kDACI,WAAYpE,GAAQ,IAAD,8BACf,cAAMA,IACDqE,iBAAmB,EAAKA,iBAAiBjD,KAAtB,gBACxB,EAAKkD,eAAiB,EAAKA,eAAelD,KAApB,gBAHP,EADvB,oDAOI,SAAiBmD,GACb,IAAMC,EAAeD,EAAMhD,OAAOkD,MAAM,GAClCC,EAAoBhD,KAAK1B,MAAM2E,aAE/BC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAASP,GACrB,IAAMQ,EAAeR,EAAMhD,OAAOyD,OAC5BC,EAAaC,IAAYH,GAC/BL,EAAkBO,IAEtBL,EAAOO,WAAWX,KAjB1B,4BAoBI,WAzBJ,IAAoBnE,EAAM+E,EAAN/E,EA0BDqB,KAAK1B,MAAMK,KA1BJ+E,EA0BU,sBAzBZC,KACpBC,CAAYjF,EAAM+E,KAGtB,oBAyBI,WACI,IAAMG,EAAoB7E,OAAOC,KAAKe,KAAK1B,MAAMK,KAAK,IAAI,GAE1D,OACI,sBAAKJ,UAAU,UAAf,UACI,qBAAKA,UAAU,eAAf,SACI,qBAAIA,UAAU,aAAd,UACI,oBAAIA,UAAU,gBAAd,mBACA,oBAAIA,UAAU,uBAAd,SAAsCsF,IACtC,oBAAItF,UAAU,gBAAd,wBAGR,sBAAKA,UAAU,gBAAf,UACI,uBAAOuF,KAAK,OAAOvF,UAAU,aAAagC,SAAUP,KAAK2C,mBACzD,wBAAQpE,UAAU,kBAAkBmC,QAASV,KAAK4C,eAAlD,gCAvCpB,GAA4BjC,IAAMC,WCD5BmD,EAAsB,CACxB,CAACC,YAAa,YAAaC,WAAY,GAAI,aAAc,0KAA2K9D,MAAO,QAC3O,CAAC6D,YAAa,YAAaC,WAAY,KAAM,aAAc,sKAAuK9D,MAAO,SACzO,CAAC6D,YAAa,YAAaC,YAAa,EAAG,aAAc,sMAAuM9D,MAAO,KAGrQ+D,E,kDACF,WAAY5F,GAAQ,IAAD,8BACf,cAAMA,IACDwC,MAAQ,CACTnC,KAAMoF,EACNnF,iBAAkB,GAEtB,EAAKuF,kBAAoB,EAAKA,kBAAkBzE,KAAvB,gBACzB,EAAK0E,2BAA6B,EAAKA,2BAA2B1E,KAAhC,gBAClC,EAAK2E,iBAAmB,EAAKA,iBAAiB3E,KAAtB,gBART,E,qDAWnB,SAAkBI,EAAIwE,EAAQvE,GAC1B,IAAMpB,EAAOqB,KAAKc,MAAMnC,KAAKuD,QAC7BvD,EAAKmB,GAAIwE,GAAUvE,EACnBC,KAAKuC,SAAS,CAAC5D,KAAMA,M,wCAGzB,SAA2BU,GACvBW,KAAKuC,SAAS,CAAC3D,gBAAiBS,M,8BAGpC,SAAiBV,GACbE,QAAQC,IAAI,8BACZD,QAAQC,IAAIH,GACZqB,KAAKuC,SAAS,CACV5D,KAAMA,EACNC,iBAAkB,M,oBAI1B,WACI,OACI,sBAAKL,UAAU,iBAAf,UACI,cAAC,EAAD,CACII,KAAMqB,KAAKc,MAAMnC,KACjBsE,aAAcjD,KAAKqE,mBAEvB,sBAAK9F,UAAU,mBAAf,UACI,cAAC,EAAD,CACII,KAAMqB,KAAKc,MAAMnC,KACjBC,gBAAiBoB,KAAKc,MAAMlC,gBAC5BU,cAAeU,KAAKmE,kBACpB5E,uBAAwBS,KAAKoE,6BAEjC,cAAC,EAAD,CACIzF,KAAMqB,KAAKc,MAAMnC,KACjBC,gBAAiBoB,KAAKc,MAAMlC,4B,GA/ClC+B,IAAMC,WAuDxB2D,IAASC,OACL,cAAC,EAAD,IACArD,SAASC,eAAe,W","file":"static/js/main.3ff60c85.chunk.js","sourcesContent":["import React from 'react';\n\nexport function LeftPanel(props) {\n    return (\n        <div className=\"left-panel\">\n            <TopLeftPanel {...props} />\n            <BottomLeftPanel {...props} />\n        </div>\n    );\n}\n\nexport function BottomLeftPanel(props) {\n    const data = props.data;\n    const inspected_index = props.inspected_index === -1 ? 0 : props.inspected_index;\n    const sample = data[inspected_index];\n    console.log(sample);\n\n    const keys = Object.keys(sample);\n    const listKeyValuePairs = keys.map(key =>\n        <li>\n            <span className=\"list-key\">{key}</span>: {\" \"}\n            <span className=\"list-value\">{sample[key]}</span>\n        </li>\n    );\n    \n    return (\n        <div className=\"bottom-left-panel\">\n            <ul className=\"list-dictionary\">\n                {listKeyValuePairs}\n            </ul>\n        </div>\n    )\n}\n\nexport function TopLeftPanel(props) {\n    const data = props.data;\n    const inspected_index = props.inspected_index === -1 ? 0 : props.inspected_index;\n        \n    const data_arr = data.map((sample, index) =>\n        <Sample \n            key={index}\n            index={index}\n            inspected_index={inspected_index}\n            sample={sample}\n            onLabelChange={props.onLabelChange} \n            onInspectedIndexChange={props.onInspectedIndexChange}\n        />\n    );\n\n    return (\n        <div className=\"top-left-panel\">\n            {data_arr}\n        </div>\n    );\n}\n\n\nclass Sample extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleLabelChange = this.handleLabelChange.bind(this);\n        this.handleInspectedId = this.handleInspectedId.bind(this);\n    }\n    \n    handleLabelChange(e) {\n        console.log(e.target.id, 'label', e.target.value);\n        this.props.onLabelChange(e.target.id, 'label', e.target.value);\n    }\n\n    handleInspectedId(index) {\n        this.props.onInspectedIndexChange(index);\n    }\n    \n    render() {\n        const index = this.props.index;\n        const first_column = Object.values(this.props.sample)[0];\n        const label = this.props.sample.label;\n        const commit_url = this.props.sample[\"commit url\"];\n\n        const divClassName = \"sample-row\" + \n                                ((index % 2 != 0) ? \" alternate-color\" : \"\") +\n                                ((this.props.inspected_index === index ? \" inspected-sample\" : \"\"));\n        \n        const selectOptions = [\"open\", \"close\", \"unknown\", \"\"];\n        const selectElement = (\n            <select id={index} className=\"label-select\" value={label} onChange={this.handleLabelChange}>\n                {selectOptions.map((option) => <option value={option}>{option}</option>)}\n                {(selectOptions.includes(label) || label === \"\")\n                    ? null\n                    : <option value={label}>{label}</option>\n                }\n            </select>\n        )\n\n        return (\n            <div className={divClassName}>\n                <ul className=\"sample-ul\">\n                    <li className=\"sample-index\">#{index}</li>\n                    <li className=\"sample-first-column\">{first_column}</li>\n                    <li className=\"sample-label\">{selectElement}</li>\n                    <li className=\"sample-inspect-button\">\n                        <button \n                            className=\"inspect-button\"\n                            onClick={() => this.handleInspectedId(index)}\n                        >\n                            Inspect\n                        </button>\n                    </li>\n                </ul>\n            </div>\n        );\n    }\n}\n\n","import React from 'react';\nimport axios from 'axios';\n\nexport class RightPanel extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            code_block: \"@ Placeholder: Please select a sample\",\n            line_numbers: \"\"\n        };\n    }\n\n    componentDidUpdate(prevProps) {\n        console.log(\"@ componentDidUpdate\");\n        const element = document.getElementById(\"scroll-into-view-line\");\n        if (element != null) {\n            element.scrollIntoView();\n        }\n        \n        if (this.props.inspected_index === prevProps.inspected_index) {\n            return;\n        }\n\n        if (this.props.inspected_index === -1) {\n            this.setState({\n                code_block: \"@ Placeholder: Please select a sample\",\n                line_numbers: \"\"\n            });\n            return;\n        }\n\n        let get_url = this.props.data[this.props.inspected_index][\"commit url\"];\n        get_url = get_url.replace(\"https://github.com\", \"https://raw.githubusercontent.com\");\n        get_url = get_url.replace(\"tree/\", \"\");\n\n        let positiveLineHighlight = true;\n        let line_number = this.props.data[this.props.inspected_index][\"start_line\"];\n        if (line_number < 1) {\n            line_number = 1;\n            positiveLineHighlight = false;\n        }\n\n        const self = this;\n        axios.get(get_url).then(function(response) {\n            line_number = line_number - 1;      // account for zero-indexing of array\n            \n            const code_array = response.data.split(\"\\n\");\n            const code_above = code_array.slice(0, line_number);\n            const code_line = code_array[line_number];\n            const code_below = code_array.slice(line_number + 1);\n            \n            let line_numbers = code_array.map((line, index) => \n                <code className=\"line-number\">{index + 1}<br /></code>);\n            line_numbers = (\n                <div className=\"line-numbers\">\n                    <code>{line_numbers}</code>\n                </div>\n            );\n            \n            const code_block = (\n                <div className=\"code-block\">\n                    <code>{code_above.join(\"\\n\")}</code>\n                    { line_number > 0 ? <br /> : \"\"}\n                    <code\n                        id=\"scroll-into-view-line\" \n                        className={positiveLineHighlight ? \"highlight-line\" : \"\"}\n                    >\n                        {code_line}\n                    </code>\n                    <br />\n                    <code>{code_below.join(\"\\n\")}</code>\n                </div>\n            );\n\n            self.setState({ code_block, line_numbers });\n        }).catch(function(error) {\n            console.log(error);\n        });\n    }\n    \n    render() {\n        console.log(\"@ render() of RightPanel\");\n        return (\n            <div className=\"right-panel\">\n                {this.state.line_numbers} \n                {this.state.code_block} \n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport * as d3 from \"d3\";\nimport useCsvDownloader from 'use-csv-downloader';\n\nfunction Downloader(data, outFilename) {\n    const downloadCsv = useCsvDownloader();\n    downloadCsv(data, outFilename);\n}\n\nexport class TopNav extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleFileChange = this.handleFileChange.bind(this);\n        this.handleDownload = this.handleDownload.bind(this);\n    }\n\n    handleFileChange(event) {\n        const uploadedFile = event.target.files[0];\n        const propsOnDataChange = this.props.onDataChange;\n\n        const reader = new FileReader();\n        reader.onload = function(event) {\n            const dataAsString = event.target.result;\n            const parsedData = d3.csvParse(dataAsString);\n            propsOnDataChange(parsedData);\n        }\n        reader.readAsText(uploadedFile);\n    }\n    \n    handleDownload() {\n        Downloader(this.props.data, \"output-labelled.csv\");\n    }\n\n    \n    render() {\n        const first_column_name = Object.keys(this.props.data[0])[0];\n        \n        return (\n            <div className=\"top-nav\">\n                <div className=\"top-left-nav\">\n                    <ul className=\"heading-ul\">\n                        <li className=\"heading-index\">index</li>\n                        <li className=\"heading-first-column\">{first_column_name}</li>\n                        <li className=\"heading-label\">label</li>\n                    </ul>\n                </div>\n                <div className=\"top-right-nav\">\n                    <input type=\"file\" className=\"input-file\" onChange={this.handleFileChange} />\n                    <button className=\"download-button\" onClick={this.handleDownload}>Download</button>\n\n                    {/* <CsvDownloader \n                        className=\"download-button\"\n                        filename=\"output\"\n                        extension=\".csv\"\n                        separator=\",\"\n                        // columns={Object.keys(this.props.data[0])}\n                        text=\"Download\"\n                        meta=\"true\"\n                        bom=\"true\"\n                        datas={this.props.data}\n                    />\n                    <CSVLink data={this.props.data} >\n                        Download me\n                    </CSVLink> */}\n                </div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/App.css';\nimport './css/LeftPanel.css';\nimport { LeftPanel } from './LeftPanel';\nimport { RightPanel } from './RightPanel';\nimport { TopNav } from './TopNav';\n\nconst initial_sample_data = [\n    {bug_pattern: 'SAMPLE_01', start_line: 92, \"commit url\": \" https://github.com/apache/phoenix/tree/27a6db9ae49df5ca14e2b9cb07ddf6bb608db976/./phoenix-core/src/it/java/org/apache/phoenix/end2end/QueryDatabaseMetaDataIT.java#L92\", label: 'open'},\n    {bug_pattern: 'SAMPLE_02', start_line: 1825, \"commit url\": \"https://github.com/apache/phoenix/tree/27a6db9ae49df5ca14e2b9cb07ddf6bb608db976/./phoenix-core/src/it/java/org/apache/phoenix/end2end/VariableLengthPKIT.java#L1825\", label: 'close'},\n    {bug_pattern: 'SAMPLE_03', start_line: -2, \"commit url\": \"https://github.com/apache/lucene-solr/tree/23aa3e09064b7147e3eb311283fe9e3410f9e39d/./lucene/queryparser/src/java/org/apache/lucene/queryparser/flexible/core/messages/QueryParserMessages.java#L-2\", label: ''},\n];\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: initial_sample_data,\n            inspected_index: -1,\n        };\n        this.handleValueChange = this.handleValueChange.bind(this);\n        this.handleInspectedIndexChange = this.handleInspectedIndexChange.bind(this);\n        this.handleDataChange = this.handleDataChange.bind(this);\n    }\n\n    handleValueChange(id, column, value) {\n        const data = this.state.data.slice();\n        data[id][column] = value;\n        this.setState({data: data});\n    }\n\n    handleInspectedIndexChange(index) {\n        this.setState({inspected_index: index});\n    }\n\n    handleDataChange(data) {\n        console.log(\"handle data change in App!\");\n        console.log(data);\n        this.setState({\n            data: data, \n            inspected_index: -1\n        });\n    }\n    \n    render() {\n        return (\n            <div className=\"page-container\">\n                <TopNav\n                    data={this.state.data}\n                    onDataChange={this.handleDataChange}\n                />\n                <div className=\"bottom-container\">\n                    <LeftPanel \n                        data={this.state.data}\n                        inspected_index={this.state.inspected_index}\n                        onLabelChange={this.handleValueChange}\n                        onInspectedIndexChange={this.handleInspectedIndexChange}\n                    />\n                    <RightPanel\n                        data={this.state.data}\n                        inspected_index={this.state.inspected_index}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}