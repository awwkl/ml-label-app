{"version":3,"sources":["LeftPanel.js","RightPanel.js","TopNav.js","index.js"],"names":["LeftPanel","props","className","TopLeftPanel","BottomLeftPanel","FeatureValueItem","feature","value","String","startsWith","href","sample","data","inspected_index","console","log","listKeyValuePairs","Object","entries","map","data_arr","index","onLabelChange","onInspectedIndexChange","Sample","handleLabelChange","bind","handleInspectedId","e","target","id","this","first_column","values","label","divClassName","selectOptions","selectElement","onChange","option","includes","onClick","React","Component","RightPanel","state","code_block","line_numbers","prevProps","element","document","getElementById","scrollIntoView","get_url","replace","positiveLineHighlight","line_number","self","axios","get","then","response","code_array","split","code_above","slice","code_line","code_below","line","join","setState","catch","error","TopNav","handleFileChange","handleDownload","event","uploadedFile","files","propsOnDataChange","onDataChange","reader","FileReader","onload","dataAsString","result","parsedData","d3","readAsText","outFilename","useCsvDownloader","downloadCsv","first_column_name","keys","type","initial_sample_data","bug_pattern","start_line","App","handleValueChange","handleInspectedIndexChange","handleDataChange","column","ReactDOM","render"],"mappings":"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","file":"static/js/main.ed6980a7.chunk.js","sourcesContent":["import React from 'react';\n\nexport function LeftPanel(props) {\n    return (\n        <div className=\"left-panel\">\n            <TopLeftPanel {...props} />\n            <BottomLeftPanel {...props} />\n        </div>\n    );\n}\n\nfunction FeatureValueItem(props) {\n    const feature = props.feature;\n    let value = String(props.value);\n    if (value.startsWith(\"http\") || value.startsWith(\"www.\")) {\n        value = <a className=\"commit-link\" href={value}>{value}</a>;\n    }\n    \n    return (\n        <li>\n            <span className=\"list-feature\">{props.feature}</span>: {\" \"}\n            <span className=\"list-value\">{value}</span>\n        </li>\n    );\n}\n\nexport function BottomLeftPanel(props) {\n    const data = props.data;\n    const inspected_index = props.inspected_index === -1 ? 0 : props.inspected_index;\n    const sample = data[inspected_index];\n    console.log(sample);\n\n    const entries = Object.entries(sample);\n    const listKeyValuePairs = entries.map(([feature, value]) =>\n        <FeatureValueItem feature={feature} value={value} />\n    );\n    \n    return (\n        <div className=\"bottom-left-panel\">\n            <ul className=\"list-dictionary\">\n                {listKeyValuePairs}\n            </ul>\n        </div>\n    )\n}\n\nexport function TopLeftPanel(props) {\n    const data = props.data;\n    const inspected_index = props.inspected_index === -1 ? 0 : props.inspected_index;\n        \n    const data_arr = data.map((sample, index) =>\n        <Sample \n            key={index}\n            index={index}\n            inspected_index={inspected_index}\n            sample={sample}\n            onLabelChange={props.onLabelChange} \n            onInspectedIndexChange={props.onInspectedIndexChange}\n        />\n    );\n\n    return (\n        <div className=\"top-left-panel\">\n            {data_arr}\n        </div>\n    );\n}\n\n\nclass Sample extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleLabelChange = this.handleLabelChange.bind(this);\n        this.handleInspectedId = this.handleInspectedId.bind(this);\n    }\n    \n    handleLabelChange(e) {\n        console.log(e.target.id, 'label', e.target.value);\n        this.props.onLabelChange(e.target.id, 'label', e.target.value);\n    }\n\n    handleInspectedId(index) {\n        this.props.onInspectedIndexChange(index);\n    }\n    \n    render() {\n        const index = this.props.index;\n        const first_column = Object.values(this.props.sample)[0];\n        const label = this.props.sample.label;\n        const commit_url = this.props.sample[\"commit url\"];\n\n        const divClassName = \"sample-row\" + \n                                ((index % 2 != 0) ? \" alternate-color\" : \"\") +\n                                ((this.props.inspected_index === index ? \" inspected-sample\" : \"\"));\n        \n        const selectOptions = [\"open\", \"close\", \"unknown\", \"\"];\n        const selectElement = (\n            <select id={index} className=\"label-select\" value={label} onChange={this.handleLabelChange}>\n                {selectOptions.map((option) => <option value={option}>{option}</option>)}\n                {(selectOptions.includes(label) || label === \"\")\n                    ? null\n                    : <option value={label}>{label}</option>\n                }\n            </select>\n        )\n\n        return (\n            <div className={divClassName}>\n                <ul className=\"sample-ul\">\n                    <li className=\"sample-index\">#{index}</li>\n                    <li className=\"sample-first-column\">{first_column}</li>\n                    <li className=\"sample-label\">{selectElement}</li>\n                    <li className=\"sample-inspect-button\">\n                        <button \n                            className=\"inspect-button\"\n                            onClick={() => this.handleInspectedId(index)}\n                        >\n                            Inspect\n                        </button>\n                    </li>\n                </ul>\n            </div>\n        );\n    }\n}\n\n","import React from 'react';\nimport axios from 'axios';\n\nexport class RightPanel extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            code_block: \"@ Placeholder: Please select a sample\",\n            line_numbers: \"\"\n        };\n    }\n\n    componentDidUpdate(prevProps) {\n        console.log(\"@ componentDidUpdate\");\n        const element = document.getElementById(\"scroll-into-view-line\");\n        if (element != null) {\n            element.scrollIntoView();\n        }\n        \n        if (this.props.inspected_index === prevProps.inspected_index) {\n            return;\n        }\n\n        if (this.props.inspected_index === -1) {\n            this.setState({\n                code_block: \"@ Placeholder: Please select a sample\",\n                line_numbers: \"\"\n            });\n            return;\n        }\n\n        let get_url = this.props.data[this.props.inspected_index][\"commit url\"];\n        get_url = get_url.replace(\"https://github.com\", \"https://raw.githubusercontent.com\");\n        get_url = get_url.replace(\"tree/\", \"\");\n\n        let positiveLineHighlight = true;\n        let line_number = this.props.data[this.props.inspected_index][\"start_line\"];\n        if (line_number < 1) {\n            line_number = 1;\n            positiveLineHighlight = false;\n        }\n\n        const self = this;\n        axios.get(get_url).then(function(response) {\n            line_number = line_number - 1;      // account for zero-indexing of array\n            \n            const code_array = response.data.split(\"\\n\");\n            const code_above = code_array.slice(0, line_number);\n            const code_line = code_array[line_number];\n            const code_below = code_array.slice(line_number + 1);\n            \n            let line_numbers = code_array.map((line, index) => \n                <code className=\"line-number\">{index + 1}<br /></code>);\n            line_numbers = (\n                <div className=\"line-numbers\">\n                    <code>{line_numbers}</code>\n                </div>\n            );\n            \n            const code_block = (\n                <div className=\"code-block\">\n                    <code>{code_above.join(\"\\n\")}</code>\n                    { line_number > 0 ? <br /> : \"\"}\n                    <code\n                        id=\"scroll-into-view-line\" \n                        className={positiveLineHighlight ? \"highlight-line\" : \"\"}\n                    >\n                        {code_line}\n                    </code>\n                    <br />\n                    <code>{code_below.join(\"\\n\")}</code>\n                </div>\n            );\n\n            self.setState({ code_block, line_numbers });\n        }).catch(function(error) {\n            console.log(error);\n        });\n    }\n    \n    render() {\n        console.log(\"@ render() of RightPanel\");\n        return (\n            <div className=\"right-panel\">\n                {this.state.line_numbers} \n                {this.state.code_block} \n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport * as d3 from \"d3\";\nimport useCsvDownloader from 'use-csv-downloader';\n\nfunction Downloader(data, outFilename) {\n    const downloadCsv = useCsvDownloader();\n    downloadCsv(data, outFilename);\n}\n\nexport class TopNav extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleFileChange = this.handleFileChange.bind(this);\n        this.handleDownload = this.handleDownload.bind(this);\n    }\n\n    handleFileChange(event) {\n        const uploadedFile = event.target.files[0];\n        const propsOnDataChange = this.props.onDataChange;\n\n        const reader = new FileReader();\n        reader.onload = function(event) {\n            const dataAsString = event.target.result;\n            const parsedData = d3.csvParse(dataAsString);\n            propsOnDataChange(parsedData);\n        }\n        reader.readAsText(uploadedFile);\n    }\n    \n    handleDownload() {\n        Downloader(this.props.data, \"output-labelled.csv\");\n    }\n\n    \n    render() {\n        const first_column_name = Object.keys(this.props.data[0])[0];\n        \n        return (\n            <div className=\"top-nav\">\n                <div className=\"top-left-nav\">\n                    <ul className=\"heading-ul\">\n                        <li className=\"heading-index\">index</li>\n                        <li className=\"heading-first-column\">{first_column_name}</li>\n                        <li className=\"heading-label\">label</li>\n                    </ul>\n                </div>\n                <div className=\"top-right-nav\">\n                    <input type=\"file\" className=\"input-file\" onChange={this.handleFileChange} />\n                    <button className=\"download-button\" onClick={this.handleDownload}>Download</button>\n\n                    {/* <CsvDownloader \n                        className=\"download-button\"\n                        filename=\"output\"\n                        extension=\".csv\"\n                        separator=\",\"\n                        // columns={Object.keys(this.props.data[0])}\n                        text=\"Download\"\n                        meta=\"true\"\n                        bom=\"true\"\n                        datas={this.props.data}\n                    />\n                    <CSVLink data={this.props.data} >\n                        Download me\n                    </CSVLink> */}\n                </div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/App.css';\nimport './css/LeftPanel.css';\nimport { LeftPanel } from './LeftPanel';\nimport { RightPanel } from './RightPanel';\nimport { TopNav } from './TopNav';\n\nconst initial_sample_data = [\n    {bug_pattern: 'SAMPLE_01', start_line: 92, \"commit url\": \" https://github.com/apache/phoenix/tree/27a6db9ae49df5ca14e2b9cb07ddf6bb608db976/./phoenix-core/src/it/java/org/apache/phoenix/end2end/QueryDatabaseMetaDataIT.java#L92\", label: 'open'},\n    {bug_pattern: 'SAMPLE_02', start_line: 1825, \"commit url\": \"https://github.com/apache/phoenix/tree/27a6db9ae49df5ca14e2b9cb07ddf6bb608db976/./phoenix-core/src/it/java/org/apache/phoenix/end2end/VariableLengthPKIT.java#L1825\", label: 'close'},\n    {bug_pattern: 'SAMPLE_03', start_line: -2, \"commit url\": \"https://github.com/apache/lucene-solr/tree/23aa3e09064b7147e3eb311283fe9e3410f9e39d/./lucene/queryparser/src/java/org/apache/lucene/queryparser/flexible/core/messages/QueryParserMessages.java#L-2\", label: ''},\n];\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: initial_sample_data,\n            inspected_index: -1,\n        };\n        this.handleValueChange = this.handleValueChange.bind(this);\n        this.handleInspectedIndexChange = this.handleInspectedIndexChange.bind(this);\n        this.handleDataChange = this.handleDataChange.bind(this);\n    }\n\n    handleValueChange(id, column, value) {\n        const data = this.state.data.slice();\n        data[id][column] = value;\n        this.setState({data: data});\n    }\n\n    handleInspectedIndexChange(index) {\n        this.setState({inspected_index: index});\n    }\n\n    handleDataChange(data) {\n        console.log(\"handle data change in App!\");\n        console.log(data);\n        this.setState({\n            data: data, \n            inspected_index: -1\n        });\n    }\n    \n    render() {\n        return (\n            <div className=\"page-container\">\n                <TopNav\n                    data={this.state.data}\n                    onDataChange={this.handleDataChange}\n                />\n                <div className=\"bottom-container\">\n                    <LeftPanel \n                        data={this.state.data}\n                        inspected_index={this.state.inspected_index}\n                        onLabelChange={this.handleValueChange}\n                        onInspectedIndexChange={this.handleInspectedIndexChange}\n                    />\n                    <RightPanel\n                        data={this.state.data}\n                        inspected_index={this.state.inspected_index}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}