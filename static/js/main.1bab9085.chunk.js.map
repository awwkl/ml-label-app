{"version":3,"sources":["LeftPanel.js","RightPanel.js","TopNav.js","index.js"],"names":["LeftPanel","props","className","TopLeftPanel","BottomLeftPanel","FeatureValueItem","feature","value","String","startsWith","target","rel","href","sample","data","inspected_index","console","log","listKeyValuePairs","Object","entries","map","data_arr","index","onLabelChange","onInspectedIndexChange","Sample","handleLabelChange","bind","handleInspectedId","e","id","this","first_column","values","label","divClassName","selectOptions","selectElement","onChange","option","includes","onClick","React","Component","RightPanel","state","code_block","line_numbers","prevProps","element","document","getElementById","scrollIntoView","get_url","replace","positiveLineHighlight","line_number","self","axios","get","then","response","code_array","split","code_above","slice","code_line","code_below","line","join","setState","catch","error","TopNav","handleFileChange","handleDownload","event","uploadedFile","files","propsOnDataChange","onDataChange","reader","FileReader","onload","dataAsString","result","parsedData","d3","readAsText","outFilename","useCsvDownloader","downloadCsv","first_column_name","keys","type","initial_sample_data","bug_pattern","start_line","App","handleValueChange","handleInspectedIndexChange","handleDataChange","column","ReactDOM","render"],"mappings":"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","file":"static/js/main.1bab9085.chunk.js","sourcesContent":["import React from 'react';\n\nexport function LeftPanel(props) {\n    return (\n        <div className=\"left-panel\">\n            <TopLeftPanel {...props} />\n            <BottomLeftPanel {...props} />\n        </div>\n    );\n}\n\nfunction FeatureValueItem(props) {\n    const feature = props.feature;\n    let value = String(props.value);\n    if (value.startsWith(\"http\") || value.startsWith(\"www.\")) {\n        value = <a target=\"_blank\" rel=\"noopener noreferrer\" \n        className=\"commit-link\" href={value}>{value}</a>;\n    }\n    \n    return (\n        <li>\n            <span className=\"list-feature\">{props.feature}</span>: {\" \"}\n            <span className=\"list-value\">{value}</span>\n        </li>\n    );\n}\n\nexport function BottomLeftPanel(props) {\n    const data = props.data;\n    const inspected_index = props.inspected_index === -1 ? 0 : props.inspected_index;\n    const sample = data[inspected_index];\n    console.log(sample);\n\n    const entries = Object.entries(sample);\n    const listKeyValuePairs = entries.map(([feature, value]) =>\n        <FeatureValueItem feature={feature} value={value} />\n    );\n    \n    return (\n        <div className=\"bottom-left-panel\">\n            <ul className=\"list-dictionary\">\n                {listKeyValuePairs}\n            </ul>\n        </div>\n    )\n}\n\nexport function TopLeftPanel(props) {\n    const data = props.data;\n    const inspected_index = props.inspected_index === -1 ? 0 : props.inspected_index;\n        \n    const data_arr = data.map((sample, index) =>\n        <Sample \n            key={index}\n            index={index}\n            inspected_index={inspected_index}\n            sample={sample}\n            onLabelChange={props.onLabelChange} \n            onInspectedIndexChange={props.onInspectedIndexChange}\n        />\n    );\n\n    return (\n        <div className=\"top-left-panel\">\n            {data_arr}\n        </div>\n    );\n}\n\n\nclass Sample extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleLabelChange = this.handleLabelChange.bind(this);\n        this.handleInspectedId = this.handleInspectedId.bind(this);\n    }\n    \n    handleLabelChange(e) {\n        console.log(e.target.id, 'label', e.target.value);\n        this.props.onLabelChange(e.target.id, 'label', e.target.value);\n    }\n\n    handleInspectedId(index) {\n        this.props.onInspectedIndexChange(index);\n    }\n    \n    render() {\n        const index = this.props.index;\n        const first_column = Object.values(this.props.sample)[0];\n        const label = this.props.sample.label;\n        const commit_url = this.props.sample[\"commit url\"];\n\n        const divClassName = \"sample-row\" + \n                                ((index % 2 != 0) ? \" alternate-color\" : \"\") +\n                                ((this.props.inspected_index === index ? \" inspected-sample\" : \"\"));\n        \n        const selectOptions = [\"open\", \"close\", \"unknown\", \"\"];\n        const selectElement = (\n            <select id={index} className=\"label-select\" value={label} onChange={this.handleLabelChange}>\n                {selectOptions.map((option) => <option value={option}>{option}</option>)}\n                {(selectOptions.includes(label) || label === \"\")\n                    ? null\n                    : <option value={label}>{label}</option>\n                }\n            </select>\n        )\n\n        return (\n            <div className={divClassName}>\n                <ul className=\"sample-ul\">\n                    <li className=\"sample-index\">#{index}</li>\n                    <li className=\"sample-first-column\">{first_column}</li>\n                    <li className=\"sample-label\">{selectElement}</li>\n                    <li className=\"sample-inspect-button\">\n                        <button \n                            className=\"inspect-button\"\n                            onClick={() => this.handleInspectedId(index)}\n                        >\n                            Inspect\n                        </button>\n                    </li>\n                </ul>\n            </div>\n        );\n    }\n}\n\n","import React from 'react';\nimport axios from 'axios';\n\nexport class RightPanel extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            code_block: \"@ Placeholder: Please select a sample\",\n            line_numbers: \"\"\n        };\n    }\n\n    componentDidUpdate(prevProps) {\n        console.log(\"@ componentDidUpdate\");\n        const element = document.getElementById(\"scroll-into-view-line\");\n        if (element != null) {\n            element.scrollIntoView();\n        }\n        \n        if (this.props.inspected_index === prevProps.inspected_index) {\n            return;\n        }\n\n        if (this.props.inspected_index === -1) {\n            this.setState({\n                code_block: \"@ Placeholder: Please select a sample\",\n                line_numbers: \"\"\n            });\n            return;\n        }\n\n        let get_url = this.props.data[this.props.inspected_index][\"commit url\"];\n        get_url = get_url.replace(\"https://github.com\", \"https://raw.githubusercontent.com\");\n        get_url = get_url.replace(\"tree/\", \"\");\n\n        let positiveLineHighlight = true;\n        let line_number = this.props.data[this.props.inspected_index][\"start_line\"];\n        if (line_number < 1) {\n            line_number = 1;\n            positiveLineHighlight = false;\n        }\n\n        const self = this;\n        axios.get(get_url).then(function(response) {\n            line_number = line_number - 1;      // account for zero-indexing of array\n            \n            const code_array = response.data.split(\"\\n\");\n            const code_above = code_array.slice(0, line_number);\n            const code_line = code_array[line_number];\n            const code_below = code_array.slice(line_number + 1);\n            \n            let line_numbers = code_array.map((line, index) => \n                <code className=\"line-number\">{index + 1}<br /></code>);\n            line_numbers = (\n                <div className=\"line-numbers\">\n                    <code>{line_numbers}</code>\n                </div>\n            );\n            \n            const code_block = (\n                <div className=\"code-block\">\n                    <code>{code_above.join(\"\\n\")}</code>\n                    { line_number > 0 ? <br /> : \"\"}\n                    <code\n                        id=\"scroll-into-view-line\" \n                        className={positiveLineHighlight ? \"highlight-line\" : \"\"}\n                    >\n                        {code_line}\n                    </code>\n                    <br />\n                    <code>{code_below.join(\"\\n\")}</code>\n                </div>\n            );\n\n            self.setState({ code_block, line_numbers });\n        }).catch(function(error) {\n            console.log(error);\n        });\n    }\n    \n    render() {\n        console.log(\"@ render() of RightPanel\");\n        return (\n            <div className=\"right-panel\">\n                {this.state.line_numbers} \n                {this.state.code_block} \n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport * as d3 from \"d3\";\nimport useCsvDownloader from 'use-csv-downloader';\n\nfunction Downloader(data, outFilename) {\n    const downloadCsv = useCsvDownloader();\n    downloadCsv(data, outFilename);\n}\n\nexport class TopNav extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleFileChange = this.handleFileChange.bind(this);\n        this.handleDownload = this.handleDownload.bind(this);\n    }\n\n    handleFileChange(event) {\n        const uploadedFile = event.target.files[0];\n        const propsOnDataChange = this.props.onDataChange;\n\n        const reader = new FileReader();\n        reader.onload = function(event) {\n            const dataAsString = event.target.result;\n            const parsedData = d3.csvParse(dataAsString);\n            propsOnDataChange(parsedData);\n        }\n        reader.readAsText(uploadedFile);\n    }\n    \n    handleDownload() {\n        Downloader(this.props.data, \"output-labelled.csv\");\n    }\n\n    \n    render() {\n        const first_column_name = Object.keys(this.props.data[0])[0];\n        \n        return (\n            <div className=\"top-nav\">\n                <div className=\"top-left-nav\">\n                    <ul className=\"heading-ul\">\n                        <li className=\"heading-index\">index</li>\n                        <li className=\"heading-first-column\">{first_column_name}</li>\n                        <li className=\"heading-label\">label</li>\n                    </ul>\n                </div>\n                <div className=\"top-right-nav\">\n                    <input type=\"file\" className=\"input-file\" onChange={this.handleFileChange} />\n                    <button className=\"download-button\" onClick={this.handleDownload}>Download</button>\n\n                    {/* <CsvDownloader \n                        className=\"download-button\"\n                        filename=\"output\"\n                        extension=\".csv\"\n                        separator=\",\"\n                        // columns={Object.keys(this.props.data[0])}\n                        text=\"Download\"\n                        meta=\"true\"\n                        bom=\"true\"\n                        datas={this.props.data}\n                    />\n                    <CSVLink data={this.props.data} >\n                        Download me\n                    </CSVLink> */}\n                </div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/App.css';\nimport './css/LeftPanel.css';\nimport { LeftPanel } from './LeftPanel';\nimport { RightPanel } from './RightPanel';\nimport { TopNav } from './TopNav';\n\nconst initial_sample_data = [\n    {bug_pattern: 'SAMPLE_01', start_line: 92, \"commit url\": \" https://github.com/apache/phoenix/tree/27a6db9ae49df5ca14e2b9cb07ddf6bb608db976/./phoenix-core/src/it/java/org/apache/phoenix/end2end/QueryDatabaseMetaDataIT.java#L92\", label: 'open'},\n    {bug_pattern: 'SAMPLE_02', start_line: 1825, \"commit url\": \"https://github.com/apache/phoenix/tree/27a6db9ae49df5ca14e2b9cb07ddf6bb608db976/./phoenix-core/src/it/java/org/apache/phoenix/end2end/VariableLengthPKIT.java#L1825\", label: 'close'},\n    {bug_pattern: 'SAMPLE_03', start_line: -2, \"commit url\": \"https://github.com/apache/lucene-solr/tree/23aa3e09064b7147e3eb311283fe9e3410f9e39d/./lucene/queryparser/src/java/org/apache/lucene/queryparser/flexible/core/messages/QueryParserMessages.java#L-2\", label: ''},\n];\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: initial_sample_data,\n            inspected_index: -1,\n        };\n        this.handleValueChange = this.handleValueChange.bind(this);\n        this.handleInspectedIndexChange = this.handleInspectedIndexChange.bind(this);\n        this.handleDataChange = this.handleDataChange.bind(this);\n    }\n\n    handleValueChange(id, column, value) {\n        const data = this.state.data.slice();\n        data[id][column] = value;\n        this.setState({data: data});\n    }\n\n    handleInspectedIndexChange(index) {\n        this.setState({inspected_index: index});\n    }\n\n    handleDataChange(data) {\n        console.log(\"handle data change in App!\");\n        console.log(data);\n        this.setState({\n            data: data, \n            inspected_index: -1\n        });\n    }\n    \n    render() {\n        return (\n            <div className=\"page-container\">\n                <TopNav\n                    data={this.state.data}\n                    onDataChange={this.handleDataChange}\n                />\n                <div className=\"bottom-container\">\n                    <LeftPanel \n                        data={this.state.data}\n                        inspected_index={this.state.inspected_index}\n                        onLabelChange={this.handleValueChange}\n                        onInspectedIndexChange={this.handleInspectedIndexChange}\n                    />\n                    <RightPanel\n                        data={this.state.data}\n                        inspected_index={this.state.inspected_index}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}